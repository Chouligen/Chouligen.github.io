<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Lab3-WebGame</title>
</head>
<body>
    <div class="boxbox">
        <div class="Timer" id="status">Time</div>
        <div id="point">Point</div>
        <div class="Pic-cquestion">
            <img src="pic1.jpg">
        </div>
        <div class="question"id="question"> question1 :  1+1 = ? </div>
        <div class= "choice" id="choice1">1</div>
        <div class= "choice" id="choice2">2</div>
        <div class= "choice" id="choice3">3</div>
        <div class= "choice" id="choice4">4</div>
    </div>
    <script src="jquery-3.3.1.min.js" charset="utf-8"></script>

    <script>
        var list_question = [];
        var use_question = [];
        var count_question = 10;
        var timer;
        $(document).ready(function(){
            $.ajax({
                url: "quiz1.json",
                type: "GET",
                data: "jsonObj",
                success:function(dataquiz1){
                    for (let i = 0; i < dataquiz1.length; i++){
                        list_question[i] = dataquiz1[i];
                    }
                    nextQuestion();
                    
                    
                }
            });
        });
        $('#choice1').click(function(){
            $('#choice1').html(list_question[0]["ans"]);
        })
        $('#choice2').click(function(){
            $('#choice2').html(list_question[0]["ans"]);
        })
        $('#choice3').click(function(){
            $('#choice3').html(list_question[0]["ans"]);
        })
        $('#choice4').click(function(){
            $('#choice4').html(list_question[0]["ans"]);
        })
    function nextQuestion(){
        clearTimeout(timer);
        while (use_question.length < count_question){
            var number = Math.floor(Math.random()*list_question.length);
            console.log(number);
            if (use_question.indexOf(number)==-1){
                use_question[use_question.length] = number;
                console.log("inner"+use_question[use_question.length-1]);
                break;
            }
        }
        if (use_question.length<count_question){
            console.log("KO");
            countDown(1,"status");
            $('#question').html(list_question[number]["question"]);
            $('#choice1').html(list_question[number]["choice1"]);
            $('#choice2').html(list_question[number]["choice2"]);
            $('#choice3').html(list_question[number]["choice3"]);
            $('#choice4').html(list_question[number]["choice4"]);
        }else{
            console.log("LLL");
            clearTimeout(timer);
        }
    }

    function countDown(secs,elem) {
	var element = document.getElementById(elem);
	element.innerHTML = "Time: "+secs+" seconds";
	if(secs < 1) {
		clearTimeout(timer);

        if (use_question.length<count_question){
            nextQuestion();
        }
        
        
        // secs=5;
	}
    else{
        secs--;
	    timer = setTimeout('countDown('+secs+',"'+elem+'")',1000);
    }

}

    </script>

</body>
<style>
    .boxbox{
        border: solid rgb(0, 83, 161);
        padding: 5px;
        text-align: center;
        font-size: 2.8em;
    }
    .choice{
        border: solid rgb(0, 95, 16);
        background: rgb(101, 196, 57);
    }
    .choice:hover{
        border: solid rgb(0, 49, 95);
        background: rgb(57, 157, 196);
    }
</style>
</html>